# 在钉钉中添加AI机器人

## 4\. 配置钉钉机器人

有了webhook地址后，接下来您可以在钉钉应用中配置机器人来回答用户问题了。

### 4.1 配置钉钉机器人

1. 访问钉钉应用列表。找到刚刚创建的应用，点击应用名称进入详情页面。
2. 在**添加应用能力**页面，找到机器人卡片，点击**添加**。
3. 在机器人配置页面，打开**机器人配置**开关，您可以参考下图完成配置。**消息接收模式**请选择**HTTP模式**，**消息接收地址**为刚刚的 **WebhookUrl**。然后点击**发布**。  
**重要**  
**消息接收模式**请选择**HTTP模式**，目前AppFlow仅支持HTTP模式，选择Stream模式会导致无法返回消息。

### **4.2 发布应用版本**

应用创建完成后，如果需要将应用供企业内其他用户使用，需要发布一个版本。

1. 点击**应用开发**，在**钉钉应用**页面，点击目标应用（**百炼手机答疑**）。
2. 在目标应用开发导航栏，点击**版本管理与发布**，在**版本管理与发布**页面，点击**创建新版本**。进入版本详情页面，输入**应用版本号**和**版本描述**信息，选择合适的**应用可见范围**，完成后点击**保存**。并在弹窗中点击**直接发布**。

### 4.3 测试机器人

你可以创建群聊或在已有群聊中添加机器人，并与机器人对话，查看效果。

1. 在钉钉**群管理**中添加机器人​。进入钉钉群**群设置**页面，点击**机器人**卡片区域，在**机器人管理**页面，点击**添加机器人**。在**添加机器人**的**搜索**文本框中输入目标机器人名称，并选中要添加的机器人。点击**添加**，完成后再点击**完成添加**。
2. 在钉钉群中@机器人，进行交流互动。

## 5\. 为大模型问答应用增加私有知识

### **5.1 配置知识库**

接下来，我们可以尝试让大模型在面对客户问题时参考文档，以产出一个更准确的回答和建议。

1. **上传文件：**在百炼控制台的数据管理中的**非结构化数据**页签中点击**导入数据**，根据引导上传我们虚构的百炼系列手机产品介绍。
2. **建立索引：**进入知识索引，根据引导创建一个新的知识库，并选择刚才上传的文件，其他参数保持默认即可。
3. **引用知识：**完成知识库的创建后，可以返回我的应用进入到刚才创建的应用设置界面，打开知识检索增强开关、选择知识库，测试验证符合预期后点击**发布**。

### **5.2 检验效果**

有了参考知识，AI 机器人就能准确回答您关于百炼手机的问题了。

## 总结 

通过前面的学习，您已经能搭建一个大模型 RAG 应用，并且将其以 AI 机器人的形式添加到钉钉群中来应对客户咨询，过程仅需 0 元（免费试用额度内）10分钟。
